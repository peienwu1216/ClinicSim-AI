"""
繁體中文強制配置
確保所有輸出內容都使用繁體中文
"""

# 繁體中文強制提示詞
TRADITIONAL_CHINESE_SYSTEM_PROMPT = """
你是一個AI助手，必須嚴格遵循以下規則：

1. **語言要求**：所有輸出內容都必須使用繁體中文，絕對不能使用簡體中文
2. **文字轉換**：如果遇到簡體中文，必須自動轉換為繁體中文
3. **醫學術語**：使用正確的繁體中文醫學術語
4. **格式要求**：保持專業但友善的語氣，適合醫學生學習使用

請確保所有回應都符合繁體中文標準。
"""

# 繁體中文轉換映射
SIMPLIFIED_TO_TRADITIONAL = {
    # 常用簡體字轉換
    "的": "的", "了": "了", "是": "是", "在": "在", "有": "有", "和": "和",
    "不": "不", "人": "人", "我": "我", "他": "他", "她": "她", "它": "它",
    "们": "們", "这": "這", "那": "那", "个": "個", "为": "為", "时": "時",
    "来": "來", "去": "去", "上": "上", "下": "下", "中": "中", "大": "大",
    "小": "小", "多": "多", "少": "少", "好": "好", "坏": "壞", "对": "對",
    "错": "錯", "能": "能", "会": "會", "要": "要", "可以": "可以", "应该": "應該",
    "需要": "需要", "必须": "必須", "可能": "可能", "一定": "一定", "当然": "當然",
    "但是": "但是", "然后": "然後", "所以": "所以", "因为": "因為", "如果": "如果",
    "虽然": "雖然", "但是": "但是", "而且": "而且", "或者": "或者", "还是": "還是",
    "还是": "還是", "还是": "還是", "还是": "還是", "还是": "還是", "还是": "還是",
    
    # 醫學術語轉換
    "诊断": "診斷", "治疗": "治療", "检查": "檢查", "症状": "症狀", "疾病": "疾病",
    "患者": "患者", "病人": "病人", "医生": "醫生", "护士": "護士", "医院": "醫院",
    "临床": "臨床", "医学": "醫學", "科学": "科學", "技术": "技術", "方法": "方法",
    "过程": "過程", "结果": "結果", "效果": "效果", "作用": "作用", "功能": "功能",
    "系统": "系統", "器官": "器官", "组织": "組織", "细胞": "細胞", "基因": "基因",
    "药物": "藥物", "手术": "手術", "麻醉": "麻醉", "疼痛": "疼痛", "感染": "感染",
    "炎症": "炎症", "肿瘤": "腫瘤", "癌症": "癌症", "病毒": "病毒", "细菌": "細菌",
    "免疫": "免疫", "抗体": "抗體", "疫苗": "疫苗", "预防": "預防", "保健": "保健",
    "康复": "康復", "恢复": "恢復", "健康": "健康", "生命": "生命", "死亡": "死亡",
    "出生": "出生", "年龄": "年齡", "性别": "性別", "体重": "體重", "身高": "身高",
    "血压": "血壓", "心率": "心率", "呼吸": "呼吸", "体温": "體溫", "血糖": "血糖",
    "血液": "血液", "尿液": "尿液", "粪便": "糞便", "唾液": "唾液", "汗液": "汗液",
    "眼泪": "眼淚", "鼻涕": "鼻涕", "痰液": "痰液", "精液": "精液", "阴道": "陰道",
    "阴茎": "陰莖", "乳房": "乳房", "子宫": "子宮", "卵巢": "卵巢", "睾丸": "睪丸",
    "前列腺": "前列腺", "膀胱": "膀胱", "肾脏": "腎臟", "肝脏": "肝臟", "心脏": "心臟",
    "肺脏": "肺臟", "胃脏": "胃臟", "肠道": "腸道", "胰腺": "胰腺", "脾脏": "脾臟",
    "胆囊": "膽囊", "甲状腺": "甲狀腺", "肾上腺": "腎上腺", "垂体": "垂體", "下丘脑": "下丘腦",
    "大脑": "大腦", "小脑": "小腦", "脑干": "腦幹", "脊髓": "脊髓", "神经": "神經",
    "肌肉": "肌肉", "骨骼": "骨骼", "关节": "關節", "韧带": "韌帶", "肌腱": "肌腱",
    "皮肤": "皮膚", "毛发": "毛髮", "指甲": "指甲", "眼睛": "眼睛", "耳朵": "耳朵",
    "鼻子": "鼻子", "嘴巴": "嘴巴", "舌头": "舌頭", "牙齿": "牙齒", "喉咙": "喉嚨",
    "气管": "氣管", "支气管": "支氣管", "肺泡": "肺泡", "血管": "血管", "动脉": "動脈",
    "静脉": "靜脈", "毛细血管": "毛細血管", "淋巴": "淋巴", "淋巴结": "淋巴結",
    "骨髓": "骨髓", "血小板": "血小板", "红细胞": "紅細胞", "白细胞": "白細胞",
    "血红蛋白": "血紅蛋白", "胆固醇": "膽固醇", "甘油三酯": "甘油三酯", "尿酸": "尿酸",
    "肌酐": "肌酐", "尿素": "尿素", "转氨酶": "轉氨酶", "胆红素": "膽紅素",
    "碱性磷酸酶": "鹼性磷酸酶", "乳酸脱氢酶": "乳酸脫氫酶", "肌酸激酶": "肌酸激酶",
    "肌钙蛋白": "肌鈣蛋白", "脑钠肽": "腦鈉肽", "C反应蛋白": "C反應蛋白",
    "降钙素原": "降鈣素原", "白介素": "白介素", "肿瘤坏死因子": "腫瘤壞死因子",
    "干扰素": "干擾素", "生长因子": "生長因子", "激素": "激素", "胰岛素": "胰島素",
    "肾上腺素": "腎上腺素", "去甲肾上腺素": "去甲腎上腺素", "多巴胺": "多巴胺",
    "血清素": "血清素", "褪黑素": "褪黑素", "皮质醇": "皮質醇", "醛固酮": "醛固酮",
    "睾酮": "睪酮", "雌激素": "雌激素", "孕激素": "孕激素", "促卵泡激素": "促卵泡激素",
    "促黄体激素": "促黃體激素", "促甲状腺激素": "促甲狀腺激素", "促肾上腺皮质激素": "促腎上腺皮質激素",
    "生长激素": "生長激素", "催乳素": "催乳素", "抗利尿激素": "抗利尿激素",
    "催产素": "催產素", "促性腺激素": "促性腺激素", "促黑素细胞激素": "促黑素細胞激素",
    "促肾上腺皮质激素释放激素": "促腎上腺皮質激素釋放激素", "促甲状腺激素释放激素": "促甲狀腺激素釋放激素",
    "促性腺激素释放激素": "促性腺激素釋放激素", "促生长激素释放激素": "促生長激素釋放激素",
    "促黑素细胞激素释放激素": "促黑素細胞激素釋放激素", "促催乳素释放激素": "促催乳素釋放激素",
    "促催产素释放激素": "促催產素釋放激素", "促抗利尿激素释放激素": "促抗利尿激素釋放激素",
    "促促性腺激素释放激素": "促促性腺激素釋放激素", "促促生长激素释放激素": "促促生長激素釋放激素",
    "促促黑素细胞激素释放激素": "促促黑素細胞激素釋放激素", "促促催乳素释放激素": "促促催乳素釋放激素",
    "促促催产素释放激素": "促促催產素釋放激素", "促促抗利尿激素释放激素": "促促抗利尿激素釋放激素"
}

def convert_to_traditional_chinese(text: str) -> str:
    """將簡體中文轉換為繁體中文"""
    if not text:
        return text
    
    result = text
    for simplified, traditional in SIMPLIFIED_TO_TRADITIONAL.items():
        result = result.replace(simplified, traditional)
    
    return result

def ensure_traditional_chinese(text: str) -> str:
    """確保文字使用繁體中文"""
    if not text:
        return text
    
    # 先轉換簡體字
    converted = convert_to_traditional_chinese(text)
    
    # 添加繁體中文強制提示
    return f"{TRADITIONAL_CHINESE_SYSTEM_PROMPT}\n\n{converted}"
