# ClinicSim-AI å¿«é€Ÿåƒè€ƒ

## ğŸš€ æœ¬åœ°é–‹ç™¼å¿«é€Ÿå•Ÿå‹•

### ç¬¬ä¸€æ¬¡è¨­å®š
```bash
# 1. å…‹éš†å°ˆæ¡ˆ
git clone <repository-url>
cd ClinicSim-AI

# 2. å»ºç«‹è™›æ“¬ç’°å¢ƒ
python -m venv venv
source venv/bin/activate  # macOS/Linux
# æˆ– venv\Scripts\activate  # Windows

# 3. å®‰è£ä¾è³´
pip install -r requirements.txt

# 4. å»ºç«‹ RAG ç´¢å¼•
python build_index.py

# 5. è¨­å®šç’°å¢ƒè®Šæ•¸
echo "OLLAMA_HOST=http://127.0.0.1:11434" > .env
echo "OLLAMA_MODEL=llama3:8b" >> .env

# 6. å•Ÿå‹• Ollama (å¯é¸)
ollama serve
ollama pull llama3:8b

# 7. å•Ÿå‹•ç³»çµ±
python server.py &  # å¾Œç«¯
streamlit run app.py  # å‰ç«¯
```

### æ—¥å¸¸é–‹ç™¼
```bash
# å•Ÿå‹•è™›æ“¬ç’°å¢ƒ
source venv/bin/activate

# å•Ÿå‹•ç³»çµ±
python server.py &  # çµ‚ç«¯ 1
streamlit run app.py  # çµ‚ç«¯ 2
```

## ğŸ–¥ï¸ AMD AI PC éƒ¨ç½²

### æº–å‚™éšæ®µ (æœ¬åœ°)
```bash
# 1. å»ºç«‹ç´¢å¼•
python build_index.py

# 2. æ‰“åŒ…ç´¢å¼•
tar -czf faiss_index.tar.gz faiss_index/

# 3. ä¸Šå‚³åˆ° AMD AI PC
scp -r . user@amd-ai-pc:/path/to/deployment/
scp faiss_index.tar.gz user@amd-ai-pc:/path/to/deployment/ClinicSim-AI/
```

### éƒ¨ç½²éšæ®µ (AMD AI PC)
```bash
# 1. è§£å£“ç¸®ç´¢å¼•
cd /path/to/deployment/ClinicSim-AI
tar -xzf faiss_index.tar.gz

# 2. å®‰è£ä¾è³´
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# 3. å•Ÿå‹•ç³»çµ±
python server.py
```

## ğŸ”§ å¸¸ç”¨æŒ‡ä»¤

### RAG ç³»çµ±
```bash
# é‡æ–°å»ºç«‹ç´¢å¼•
rm -rf faiss_index/
python build_index.py

# æ¸¬è©¦ RAG ç³»çµ±
python -c "
from rag_handler import rag_system
result = rag_system.search('ECG å¿ƒé›»åœ–çš„é‡è¦æ€§')
print(result)
"
```

### ç³»çµ±æ¸¬è©¦
```bash
# æ¸¬è©¦å¾Œç«¯ API
curl -X POST http://localhost:5001/ask_patient \
  -H "Content-Type: application/json" \
  -d '{"history": [{"role": "user", "content": "ä½ å¥½"}], "case_id": "case_chest_pain_acs_01"}'

# æ¸¬è©¦è©³ç´°å ±å‘Š
curl -X POST http://localhost:5001/get_detailed_report \
  -H "Content-Type: application/json" \
  -d '{"full_conversation": [{"role": "user", "content": "æ¸¬è©¦"}], "case_id": "case_chest_pain_acs_01"}'
```

### ä¾è³´ç®¡ç†
```bash
# æ›´æ–°ä¾è³´
pip install --upgrade pip
pip install -r requirements.txt --force-reinstall

# æª¢æŸ¥ä¾è³´
pip list
pip check
```

## ğŸ“ é‡è¦æª”æ¡ˆ

### æ ¸å¿ƒæª”æ¡ˆ
- `app.py` - Streamlit å‰ç«¯ç•Œé¢
- `server.py` - Flask å¾Œç«¯ API
- `rag_handler.py` - RAG ç³»çµ±è™•ç†å™¨
- `build_index.py` - RAG ç´¢å¼•å»ºç«‹è…³æœ¬

### é…ç½®æª”æ¡ˆ
- `requirements.txt` - Python ä¾è³´æ¸…å–®
- `.env` - ç’°å¢ƒè®Šæ•¸è¨­å®š
- `cases/case_chest_pain_acs_01.json` - æ¡ˆä¾‹é…ç½®

### è³‡æ–™æª”æ¡ˆ
- `documents/` - è‡¨åºŠæŒ‡å¼•æ–‡ä»¶
- `faiss_index/` - RAG å‘é‡ç´¢å¼• (ä¸é€²ç‰ˆæœ¬æ§åˆ¶)

## ğŸ› å¿«é€Ÿæ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ
```bash
# 1. RAG ç´¢å¼•è¼‰å…¥å¤±æ•—
rm -rf faiss_index/
python build_index.py

# 2. ä¾è³´å®‰è£å¤±æ•—
pip install --upgrade pip
pip install -r requirements.txt --force-reinstall

# 3. Ollama é€£æ¥å¤±æ•—
ollama serve
ollama list

# 4. è¨˜æ†¶é«”ä¸è¶³
# æ¸›å°‘ documents/ ä¸­çš„æ–‡ä»¶æ•¸é‡
# èª¿æ•´ build_index.py ä¸­çš„ chunk_size
```

### æª¢æŸ¥ç³»çµ±ç‹€æ…‹
```bash
# æª¢æŸ¥ Python é€²ç¨‹
ps aux | grep python

# æª¢æŸ¥ç«¯å£ä½¿ç”¨
netstat -tulpn | grep :5001
netstat -tulpn | grep :8501

# æª¢æŸ¥è¨˜æ†¶é«”ä½¿ç”¨
free -h
top -o %MEM
```

## ğŸ“Š é–‹ç™¼å·¥ä½œæµç¨‹

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨æœ¬åœ°é–‹ç™¼ç’°å¢ƒä¸­é–‹ç™¼
2. æ¸¬è©¦åŠŸèƒ½æ­£å¸¸é‹ä½œ
3. æäº¤ä»£ç¢¼åˆ° Git
4. æ›´æ–°éƒ¨ç½²åˆ° AMD AI PC

### æ·»åŠ æ–°æ¡ˆä¾‹
1. åœ¨ `cases/` ä¸­å»ºç«‹ JSON æª”æ¡ˆ
2. æ›´æ–° `app.py` ä¸­çš„ `CASE_ID`
3. æ¸¬è©¦æ¡ˆä¾‹åŠŸèƒ½

### æ·»åŠ æ–°æŒ‡å¼•
1. å°‡æ–‡ä»¶æ”¾å…¥ `documents/`
2. åŸ·è¡Œ `python build_index.py`
3. é‡å•Ÿç³»çµ±

## ğŸ” é™¤éŒ¯æŠ€å·§

### æ—¥èªŒæª¢æŸ¥
```bash
# æŸ¥çœ‹å¾Œç«¯æ—¥èªŒ
python server.py 2>&1 | tee server.log

# æŸ¥çœ‹å‰ç«¯æ—¥èªŒ
streamlit run app.py --logger.level debug
```

### æ¸¬è©¦ç‰¹å®šåŠŸèƒ½
```bash
# æ¸¬è©¦ RAG æœå°‹
python -c "
from rag_handler import rag_system
print(rag_system.search('ä½ çš„æŸ¥è©¢'))
"

# æ¸¬è©¦æ¡ˆä¾‹è¼‰å…¥
python -c "
import json
with open('cases/case_chest_pain_acs_01.json', 'r') as f:
    case = json.load(f)
print('æ¡ˆä¾‹è¼‰å…¥æˆåŠŸ:', case['case_id'])
"
```

## ğŸ“ ç·Šæ€¥è¯çµ¡

### ç³»çµ±ç„¡æ³•å•Ÿå‹•
1. æª¢æŸ¥æ—¥èªŒæª”æ¡ˆ
2. é‡å•Ÿæœå‹™
3. é‡æ–°éƒ¨ç½²
4. è¯ç¹«æŠ€è¡“æ”¯æ´

### åŠŸèƒ½ç•°å¸¸
1. æª¢æŸ¥ä¾è³´æ˜¯å¦å®Œæ•´
2. é©—è­‰ RAG ç´¢å¼•æ˜¯å¦æ­£å¸¸
3. æ¸¬è©¦ API ç«¯é»
4. æŸ¥çœ‹éŒ¯èª¤è¨Šæ¯

---

**å¿«é€Ÿåƒè€ƒç‰ˆæœ¬**ï¼šv1.0.0
**æœ€å¾Œæ›´æ–°**ï¼š2025å¹´9æœˆ
