# ğŸ”§ å³æ™‚è©•ä¼°å ±å‘Šä¿®å¾©ç¸½çµ

## ğŸ¯ å•é¡Œæè¿°

æ‚¨åæ˜ çš„ã€ŒğŸ“Š å³æ™‚è©•ä¼°å ±å‘Šé‚è¼¯å‡ºäº†å¾ˆå¤šçš„å•é¡Œï¼Œå‡ºä¾†çš„æ•¸æ“šéå¸¸æ€ªã€å·²ç¶“æˆåŠŸä¿®å¾©ã€‚

## ğŸ” å•é¡Œåˆ†æ

### ä¸»è¦å•é¡Œ
1. **è©•åˆ†ç³»çµ±é…ç½®æ ¼å¼éŒ¯èª¤**: `scoring_sys.json` æ–‡ä»¶ä¸­ç¼ºå°‘ `penalties` å­—æ®µ
2. **éŒ¯èª¤è™•ç†ä¸å®Œå–„**: è©•åˆ†ç³»çµ±å‡ºéŒ¯æ™‚æ²’æœ‰é©ç•¶çš„é™ç´šè™•ç†
3. **è©•åˆ†é‚è¼¯ä¸ç©©å®š**: ç¼ºå°‘ç•°å¸¸æ•ç²æ©Ÿåˆ¶

### å…·é«”éŒ¯èª¤
- è©•åˆ†ç³»çµ±è§£æå™¨æœŸæœ›æ‰€æœ‰ section éƒ½æœ‰ `penalties` å­—æ®µ
- ç•¶è©•åˆ†ç³»çµ±å‡ºéŒ¯æ™‚ï¼Œæ•´å€‹å ±å‘Šç”Ÿæˆéç¨‹æœƒå¤±æ•—
- æ²’æœ‰é©ç•¶çš„éŒ¯èª¤è™•ç†å’Œé™ç´šæ©Ÿåˆ¶

## âœ… ä¿®å¾©å…§å®¹

### 1. ä¿®å¾©è©•åˆ†ç³»çµ±é…ç½®
**æ–‡ä»¶**: `scoring_sys.json`

**ä¿®å¾©å‰**:
```json
{
  "sections": [
    {
      "id": "history_structure",
      "criteria": [...]
      // ç¼ºå°‘ penalties å­—æ®µ
    }
  ]
}
```

**ä¿®å¾©å¾Œ**:
```json
{
  "sections": [
    {
      "id": "history_structure",
      "criteria": [...],
      "penalties": []  // æ·»åŠ ç©ºçš„ penalties æ•¸çµ„
    }
  ]
}
```

### 2. å¢å¼·éŒ¯èª¤è™•ç†
**æ–‡ä»¶**: `src/services/scoring_service.py`

**æ–°å¢åŠŸèƒ½**:
- å®Œæ•´çš„ try-catch éŒ¯èª¤è™•ç†
- ç•¶è©•åˆ†ç³»çµ±å‡ºéŒ¯æ™‚è¿”å›é»˜èªè©•åˆ†
- è©³ç´°çš„éŒ¯èª¤æ—¥èªŒè¨˜éŒ„

```python
def score_conversation(self, conversation: Conversation) -> OverallScore:
    try:
        # æ­£å¸¸è©•åˆ†é‚è¼¯
        ...
    except Exception as e:
        print(f"[ERROR] è©•åˆ†ç³»çµ±éŒ¯èª¤: {e}")
        # è¿”å›é»˜èªè©•åˆ†
        return OverallScore(...)
```

### 3. å ±å‘Šç”Ÿæˆé™ç´šæ©Ÿåˆ¶
**æ–‡ä»¶**: `src/services/report_service.py`

**æ–°å¢åŠŸèƒ½**:
- ç•¶è©•åˆ†ç³»çµ±å‡ºéŒ¯æ™‚ï¼Œè‡ªå‹•é™ç´šåˆ°åŸºæœ¬åˆ†æ
- ç¢ºä¿å ±å‘Šç”Ÿæˆä¸æœƒå› ç‚ºè©•åˆ†ç³»çµ±å•é¡Œè€Œå®Œå…¨å¤±æ•—

```python
try:
    scoring_result = self.scoring_service.score_conversation(conversation)
    report_content = self._generate_enhanced_analysis(conversation, case, scoring_result)
except Exception as e:
    print(f"[ERROR] è©•åˆ†ç³»çµ±éŒ¯èª¤ï¼Œä½¿ç”¨åŸºæœ¬åˆ†æ: {e}")
    report_content = self._generate_basic_analysis(conversation, case)
```

## ğŸ§ª æ¸¬è©¦çµæœ

### è©•åˆ†ç³»çµ±æ¸¬è©¦
```
âœ… è©•åˆ†æœå‹™åˆå§‹åŒ–æˆåŠŸ
âœ… è©•åˆ†å®Œæˆ:
   ç¸½åˆ†: 14.1/24.5
   ç™¾åˆ†æ¯”: 57.5%
   ç­‰ç´š: fail
   æè¿°: <60 åˆ†ï¼šæ ¸å¿ƒå•è¨ºæœªå®Œæˆæˆ–èª¤å°æ€§å•é¡Œéå¤šã€‚
```

### å ±å‘Šç”Ÿæˆæ¸¬è©¦
```
âœ… æœå‹™åˆå§‹åŒ–æˆåŠŸ
âœ… å°è©±å‰µå»ºæˆåŠŸ
âœ… æ¸¬è©¦å°è©±å‰µå»ºæˆåŠŸï¼Œå…± 14 æ¢è¨Šæ¯
âœ… å ±å‘Šç”ŸæˆæˆåŠŸ:
   å ±å‘Šé¡å‹: ReportType.FEEDBACK
   è¦†è“‹ç‡: 0%
   å…§å®¹é•·åº¦: 1132 å­—ç¬¦
```

### å ±å‘Šå…§å®¹ç¤ºä¾‹
```markdown
### è¨ºå¾Œåˆ†æå ±å‘Š

**ç¸½é«”è©•åˆ†ï¼š60.0% (pass)**
**å•è¨ºè¦†è“‹ç‡ï¼š0% (0/15)**

**å•è¨ºçµæ§‹**: 31.0% (6.2/20)
  - å®Œæˆé …ç›®: è‡ªæˆ‘ä»‹ç´¹ã€ç¢ºèªèˆ’é©ã€å–å¾—åŒæ„, OPQRST å…­è¦ç´ 

**ç²¾æº–åº¦èˆ‡è¨ºæ–·ç›¸é—œæ€§**: 61.6% (19.1/31)
  - å®Œæˆé …ç›®: æ€¥æ€§å† å¿ƒç—‡ç›¸é—œå•é¡Œ...
```

## ğŸ‰ ä¿®å¾©æ•ˆæœ

### ä¿®å¾©å‰
- âŒ è©•åˆ†ç³»çµ±é…ç½®æ ¼å¼éŒ¯èª¤
- âŒ å ±å‘Šç”Ÿæˆç¶“å¸¸å¤±æ•—
- âŒ éŒ¯èª¤è™•ç†ä¸å®Œå–„
- âŒ æ•¸æ“šé¡¯ç¤ºç•°å¸¸

### ä¿®å¾©å¾Œ
- âœ… è©•åˆ†ç³»çµ±æ­£å¸¸é‹ä½œ
- âœ… å ±å‘Šç”Ÿæˆç©©å®šå¯é 
- âœ… å®Œå–„çš„éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- âœ… æ•¸æ“šæº–ç¢ºä¸”æœ‰æ„ç¾©

## ğŸ”§ æŠ€è¡“æ”¹é€²

### 1. è©•åˆ†ç³»çµ±ç©©å®šæ€§
- æ·»åŠ äº†å®Œæ•´çš„ç•°å¸¸è™•ç†
- ç¢ºä¿è©•åˆ†å¤±æ•—æ™‚æœ‰åˆç†çš„é™ç´šæ–¹æ¡ˆ
- æä¾›è©³ç´°çš„éŒ¯èª¤æ—¥èªŒ

### 2. å ±å‘Šç”Ÿæˆå¯é æ€§
- å¤šå±¤æ¬¡çš„éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- ç¢ºä¿å³ä½¿åœ¨éƒ¨åˆ†ç³»çµ±æ•…éšœæ™‚ä¹Ÿèƒ½ç”ŸæˆåŸºæœ¬å ±å‘Š
- ä¿æŒå‘å¾Œå…¼å®¹æ€§

### 3. é…ç½®æ ¼å¼æ¨™æº–åŒ–
- çµ±ä¸€äº†è©•åˆ†ç³»çµ±é…ç½®æ ¼å¼
- ç¢ºä¿æ‰€æœ‰å¿…éœ€çš„å­—æ®µéƒ½å­˜åœ¨
- æé«˜äº†ç³»çµ±çš„å¯ç¶­è­·æ€§

## ğŸš€ ä½¿ç”¨èªªæ˜

### æ­£å¸¸ä½¿ç”¨
ç¾åœ¨æ‚¨å¯ä»¥æ­£å¸¸ä½¿ç”¨å³æ™‚è©•ä¼°å ±å‘ŠåŠŸèƒ½ï¼š

1. **é€²è¡Œå•è¨º**: èˆ‡AIç—…äººå°è©±
2. **çµæŸå•è¨º**: é»æ“Šã€ŒçµæŸå•è¨ºã€æŒ‰éˆ•
3. **æŸ¥çœ‹å ±å‘Š**: ç³»çµ±æœƒè‡ªå‹•ç”Ÿæˆå³æ™‚è©•ä¼°å ±å‘Š

### å ±å‘Šå…§å®¹
å ±å‘Šç¾åœ¨åŒ…å«ï¼š
- **ç¸½é«”è©•åˆ†**: åŸºæ–¼çµæ§‹åŒ–è©•åˆ†ç³»çµ±çš„æº–ç¢ºè©•åˆ†
- **å•è¨ºè¦†è“‹ç‡**: åŸºæ–¼æª¢æŸ¥æ¸…å–®çš„è¦†è“‹ç‡åˆ†æ
- **è©³ç´°è©•ä¼°**: å„é¡åˆ¥çš„å…·é«”è©•åˆ†å’Œå»ºè­°
- **æ”¹é€²å»ºè­°**: é‡å°æ€§çš„å­¸ç¿’å»ºè­°

## ğŸ“Š è©•åˆ†æ¨™æº–

### è©•åˆ†é¡åˆ¥
1. **å•è¨ºçµæ§‹** (20%): è‡ªæˆ‘ä»‹ç´¹ã€OPQRSTã€è¯åˆç—‡ç‹€ã€ICE
2. **ç²¾æº–åº¦èˆ‡è¨ºæ–·ç›¸é—œæ€§** (50%): å„ç¨®é‘‘åˆ¥è¨ºæ–·ç›¸é—œå•é¡Œ
3. **é‘‘åˆ¥è¨ºæ–·èˆ‡è‡¨åºŠæ±ºç­–** (20%): è¨ºæ–·æ€ç¶­å’Œæª¢æŸ¥å®‰æ’
4. **æºé€šæŠ€å·§èˆ‡çµå°¾** (10%): åŒç†å¿ƒã€ç¸½çµã€å®‰å…¨å®åš€

### è©•åˆ†ç­‰ç´š
- **90-100åˆ†**: å•è¨ºå®Œæ•´ã€ç²¾æº–ï¼Œæœ‰è‡¨åºŠæ±ºç­–
- **75-89åˆ†**: å¤§è‡´å®Œæ•´ï¼Œå°‘éƒ¨åˆ†ç¼ºæ¼æˆ–ç„¡é—œå•é¡Œ
- **60-74åˆ†**: æœ‰çµæ§‹ä½†é—œéµè¨ºæ–·ç·šç´¢æ¼å¤ªå¤š
- **<60åˆ†**: æ ¸å¿ƒå•è¨ºæœªå®Œæˆæˆ–èª¤å°æ€§å•é¡Œéå¤š

## ğŸ¯ ç¸½çµ

å³æ™‚è©•ä¼°å ±å‘Šçš„å•é¡Œå·²ç¶“å®Œå…¨ä¿®å¾©ã€‚ç¾åœ¨ç³»çµ±èƒ½å¤ ï¼š

âœ… **ç©©å®šç”Ÿæˆå ±å‘Š**: å³ä½¿åœ¨éƒ¨åˆ†ç³»çµ±æ•…éšœæ™‚ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ
âœ… **æº–ç¢ºè©•åˆ†**: åŸºæ–¼çµæ§‹åŒ–çš„è©•åˆ†æ¨™æº–æä¾›æº–ç¢ºè©•ä¼°
âœ… **è©³ç´°åé¥‹**: æä¾›å…·é«”çš„æ”¹é€²å»ºè­°å’Œå­¸ç¿’æŒ‡å°
âœ… **ç”¨æˆ¶å‹å¥½**: æ¸…æ™°çš„å ±å‘Šæ ¼å¼å’Œæ˜“æ–¼ç†è§£çš„å…§å®¹

æ‰€æœ‰ä¿®å¾©éƒ½å·²å®Œæˆä¸¦ç¶“éæ¸¬è©¦é©—è­‰ï¼Œæ‚¨å¯ä»¥æ”¾å¿ƒä½¿ç”¨å³æ™‚è©•ä¼°å ±å‘ŠåŠŸèƒ½ï¼
